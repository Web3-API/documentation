"use strict";(self.webpackChunk_polywrap_docs=self.webpackChunk_polywrap_docs||[]).push([[46],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(n),h=o,k=c["".concat(p,".").concat(h)]||c[h]||d[h]||i;return n?a.createElement(k,r(r({ref:t},u),{},{components:n})):a.createElement(k,r({ref:t},u))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2938:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const i={id:"kotlin",title:"Kotlin"},r=void 0,l={unversionedId:"quick-start/kotlin",id:"quick-start/kotlin",title:"Kotlin",description:"The Polywrap Client",source:"@site/docs/quick-start/kotlin.md",sourceDirName:"quick-start",slug:"/quick-start/kotlin",permalink:"/quick-start/kotlin",draft:!1,editUrl:"https://github.com/polywrap/documentation/tree/main/src/docs/quick-start/kotlin.md",tags:[],version:"current",frontMatter:{id:"kotlin",title:"Kotlin"},sidebar:"docs",previous:{title:"Python",permalink:"/quick-start/python"},next:{title:"Swift",permalink:"/quick-start/swift"}},p={},s=[{value:"The Polywrap Client",id:"the-polywrap-client",level:2},{value:"Kotlin application boilerplate",id:"kotlin-application-boilerplate",level:3},{value:"Invoking your first Wrap",id:"invoking-your-first-wrap",level:3},{value:"What&#39;s going on here?",id:"whats-going-on-here",level:4},{value:"The <code>InvokeResult</code> object",id:"the-invokeresult-object",level:4},{value:"Universal SDKs",id:"universal-sdks",level:3},{value:"Compose everything",id:"compose-everything",level:3}],u={toc:s},c="wrapper";function d(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"the-polywrap-client"},"The Polywrap Client"),(0,o.kt)("p",null,"To use ",(0,o.kt)("a",{parentName:"p",href:"/concepts/wraps"},"Wraps")," in your app, all you need is the ",(0,o.kt)("a",{parentName:"p",href:"/clients"},"Polywrap Client"),"!"),(0,o.kt)("h3",{id:"kotlin-application-boilerplate"},"Kotlin application boilerplate"),(0,o.kt)("p",null,"We'll be using a simple console application written in Kotlin for this guide."),(0,o.kt)("p",null,"You can either set up a new application through an IDE of your choice, or use ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle")," to initialize a project."),(0,o.kt)("p",null,"If using ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle"),", all you need to do is run ",(0,o.kt)("inlineCode",{parentName:"p"},"gradle init")," within your project folder."),(0,o.kt)("p",null,"Make sure to:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Select ",(0,o.kt)("inlineCode",{parentName:"li"},"kotlin")," as your implementation language"),(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("inlineCode",{parentName:"li"},"Kotlin")," as your build script DSL"),(0,o.kt)("li",{parentName:"ul"},"Use a minimum target Java version of 17")),(0,o.kt)("p",null,"Inside ",(0,o.kt)("inlineCode",{parentName:"p"},"build.gradle.kts"),", you need to update your ",(0,o.kt)("inlineCode",{parentName:"p"},"plugins")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"dependencies")," sections:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="build.gradle.kts"',title:'"build.gradle.kts"'},'plugins {\n  id("org.jetbrains.kotlin.jvm") version "1.9.0"\n  \n  // The versions of the JVM and serialization plugins must be the same\n  id("org.jetbrains.kotlin.plugin.serialization") version "1.9.0"\n\n  application\n}\n\n//...\n\ndependencies {\n    // Add the polywrap-client and serialization dependency required by the Polywrap Client\n  implementation("io.polywrap:polywrap-client:0.10.4")\n  implementation("org.jetbrains.kotlinx:kotlinx-serialization-core:1.5.1")\n}\n')),(0,o.kt)("p",null,"Now you can use the Polywrap Client inside your Kotlin app!"),(0,o.kt)("h3",{id:"invoking-your-first-wrap"},"Invoking your first Wrap"),(0,o.kt)("p",null,"In order to invoke a Wrap, we first need to instantiate the Polywrap Client:"),(0,o.kt)("p",null,"At the top of your app's main file (usually ",(0,o.kt)("inlineCode",{parentName:"p"},"App.kt"),"), import the Polywrap Client:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="App.kt"',title:'"App.kt"'},"import io.polywrap.configBuilder.polywrapClient // Import of the Polywrap Client itself\nimport io.polywrap.core.resolution.Uri // The Polywrap Client uses the Uri class for invocations\n\n")),(0,o.kt)("p",null,"You can now instantiate the Polywrap Client with a default configuration within your ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="App.kt"',title:'"App.kt"'},"  val client = polywrapClient { addDefaults() }\n")),(0,o.kt)("p",null,"At this point, you can already invoke Wraps! In the simple example below, we will invoke the SHA3 Wrap within our ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="App.kt"',title:'"App.kt"'},'  val result =\n      client.invoke<String>(\n          uri = Uri("wrapscan.io/polywrap/sha3@1.0"),\n          method = "sha3_256",\n          args = mapOf("message" to "Hello Polywrap!")\n      )\n\n  if (result.isFailure) {\n    throw result.exceptionOrNull()!!\n  }\n\n  println(result)\n')),(0,o.kt)("p",null,"Running the application using ",(0,o.kt)("inlineCode",{parentName:"p"},"./gradlew run")," or through your IDE, you should now see the following appear in your console:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Success(ba5a5d5fb7674f5975f0ecd0cd9a2f4bcadc9c04f5ac2ab3a887d8f10355fc38)\n")),(0,o.kt)("p",null,"This is the ",(0,o.kt)("inlineCode",{parentName:"p"},"InvokeResult")," object. It's ",(0,o.kt)("inlineCode",{parentName:"p"},"isSuccess")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"isFailure")," properties denote whether the Wrap's invocation was successful, and we will see how to get the return value of the invocation in the next section."),(0,o.kt)("h4",{id:"whats-going-on-here"},"What's going on here?"),(0,o.kt)("p",null,"Using the Polywrap Client, we are invoking the ",(0,o.kt)("inlineCode",{parentName:"p"},"sha3_256")," method of a Wrap found under the ",(0,o.kt)("a",{parentName:"p",href:"/concepts/uris"},"WRAP URI")," ",(0,o.kt)("inlineCode",{parentName:"p"},"wrapscan.io/polywrap/sha3@1.0")," called the SHA3 Wrap."),(0,o.kt)("p",null,"Under the hood, through a process we call URI Resolution, the Polywrap Client knows how to fetch and execute the Wrap from decentralized storage."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"PolywrapClient")," comes pre-configured with everything you need for most Web2 and Web3 use-cases by default."),(0,o.kt)("h4",{id:"the-invokeresult-object"},"The ",(0,o.kt)("inlineCode",{parentName:"h4"},"InvokeResult")," object"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"InvokeResult")," is an alias of the stdlib ",(0,o.kt)("a",{parentName:"p",href:"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-result/"},(0,o.kt)("inlineCode",{parentName:"a"},"Result"))," object."),(0,o.kt)("p",null,"On successful invocations, you can extract the return value of the invocation, while on errors you can extract the underlying wrap execution exception."),(0,o.kt)("h3",{id:"universal-sdks"},"Universal SDKs"),(0,o.kt)("p",null,"Now that we know how a Wrap is invoked, let's see Polywrap's true power: ",(0,o.kt)("strong",{parentName:"p"},"universal SDKs"),"!"),(0,o.kt)("p",null,"One of the greatest benefits of Polywrap for the end-user (you!) lies in the fact that you can use the Polywrap Client to invoke the same Wrap from a variety of platforms and languages. If there's a Polywrap Client for your language, you can invoke any Wrap. This means that you can use the same SDK across multiple languages!"),(0,o.kt)("p",null,"Another important benefit of using Polywrap is that, since Wraps are downloaded from various sources, you can automatically receive patches and updates to your SDKs without having to update your codebase."),(0,o.kt)("p",null,"Now we'll invoke the Uniswap V3 Wrap which is a port of the Uniswap SDK, but written as a Wrap."),(0,o.kt)("p",null,"We can use the Uniswap Wrap to fetch Uniswap's basic data related to the WETH and USDC tokes, find the address of the pool for those two tokens. We are also checking each result for errors."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="App.kt"',title:'"App.kt"'},'  val wethResult =\n      client.invoke<Map<String, Any>>(\n          uri = Uri("wrapscan.io/polywrap/uniswap-v3@1.0"),\n          method = "fetchToken",\n          args =\n              mapOf(\n                  "address" to "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",\n                  "chainId" to "MAINNET"\n              )\n      )\n\n  // Log the invocation error and stop execution if the invocation fails\n  println(wethResult.getOrThrow())\n\n  val usdcResult =\n      client.invoke<Map<String, Any>>(\n          uri = Uri("wrapscan.io/polywrap/uniswap-v3@1.0"),\n          method = "fetchToken",\n          args =\n              mapOf(\n                  "address" to "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",\n                  "chainId" to "MAINNET"\n              )\n      )\n\n  // Log the invocation error and stop execution if the invocation fails\n  println(usdcResult.getOrThrow())\n\n  val poolAddressResult =\n      client.invoke<String>(\n          uri = Uri("wrapscan.io/polywrap/uniswap-v3@1.0"),\n          method = "getPoolAddress",\n          args =\n              mapOf(\n                  "tokenA" to wethResult.getOrDefault(null),\n                  "tokenB" to usdcResult.getOrDefault(null),\n                  "fee" to "MEDIUM"\n              )\n      )\n\n  // Log the invocation error and stop execution if the invocation fails\n  println(poolAddressResult.getOrThrow())\n')),(0,o.kt)("p",null,"You can see more examples on how to use the Uniswap V3 Wrap in its ",(0,o.kt)("a",{parentName:"p",href:"https://uniswap.docs.wrappers.io/"},"docs page"),"."),(0,o.kt)("h3",{id:"compose-everything"},"Compose everything"),(0,o.kt)("p",null,"So far, we've only invoked a single Wrap, essentially using Polywrap to access a single SDK."),(0,o.kt)("p",null,"Using the Polywrap Client, we can invoke any number of SDKs, allowing us to build infinitely composable applications. If there's a Wrap for it, we can invoke it and use its functionality."),(0,o.kt)("p",null,"Visit ",(0,o.kt)("a",{parentName:"p",href:"https://www.wrapscan.io/"},"Wrapscan")," and the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/polywrap/awesome-polywrap"},"awesome-polywrap")," repository to find a curated list of Wraps we and our community have developed."))}d.isMDXComponent=!0}}]);