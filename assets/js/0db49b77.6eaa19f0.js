"use strict";(self.webpackChunk_polywrap_docs=self.webpackChunk_polywrap_docs||[]).push([[914],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=s(n),d=o,m=c["".concat(p,".").concat(d)]||c[d]||h[d]||r;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[c]="string"==typeof e?e:o,l[1]=i;for(var s=2;s<r;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5844:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=n(7462),o=(n(7294),n(3905));const r={id:"polywrap-client",title:"Polywrap Client"},l=void 0,i={unversionedId:"quick-start/polywrap-client",id:"quick-start/polywrap-client",title:"Polywrap Client",description:"To use Wraps in your app, all you need is the Polywrap Client!",source:"@site/docs/quick-start/polywrap-client.md",sourceDirName:"quick-start",slug:"/quick-start/polywrap-client",permalink:"/quick-start/polywrap-client",draft:!1,editUrl:"https://github.com/polywrap/documentation/tree/main/src/docs/quick-start/polywrap-client.md",tags:[],version:"current",frontMatter:{id:"polywrap-client",title:"Polywrap Client"},sidebar:"docs",previous:{title:"Introduction",permalink:"/introduction"},next:{title:"Polywrap CLI",permalink:"/quick-start/polywrap-cli"}},p={},s=[{value:"NodeJS application boilerplate",id:"nodejs-application-boilerplate",level:2},{value:"Install the Polywrap Client",id:"install-the-polywrap-client",level:2},{value:"Invoking your first Wrap",id:"invoking-your-first-wrap",level:2},{value:"What&#39;s going on here?",id:"whats-going-on-here",level:3},{value:"The <code>InvokeResult</code> object",id:"the-invokeresult-object",level:3},{value:"Universal SDKs",id:"universal-sdks",level:2},{value:"Compose everything",id:"compose-everything",level:2}],u={toc:s},c="wrapper";function h(e){let{components:t,...n}=e;return(0,o.kt)(c,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"To use ",(0,o.kt)("a",{parentName:"p",href:"/concepts/wraps"},"Wraps")," in your app, all you need is the ",(0,o.kt)("strong",{parentName:"p"},"Polywrap Client"),"!"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Currently we have a stable implementation of the Polywrap Client in Javascript. Python, Rust, Swift, C# are coming soon.")),(0,o.kt)("h2",{id:"nodejs-application-boilerplate"},"NodeJS application boilerplate"),(0,o.kt)("p",null,"We'll be using a simple NodeJS application boilerplate for this guide."),(0,o.kt)("p",null,"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"npm init")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn init")," within a directory initialize an empty NodeJS project."),(0,o.kt)("p",null,"Within ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),", change the ",(0,o.kt)("inlineCode",{parentName:"p"},"type")," of the project to ",(0,o.kt)("inlineCode",{parentName:"p"},'"module"'),". This is not required as you can also use ",(0,o.kt)("inlineCode",{parentName:"p"},"require"),", but we prefer using ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," statements."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="package.json"',title:'"package.json"'},'{\n  "name": "my-app-name",\n  //...\n  "type": "module",\n  //...\n}\n')),(0,o.kt)("p",null,"Add an ",(0,o.kt)("inlineCode",{parentName:"p"},"index.js")," file with the following code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="index.js"',title:'"index.js"'},"async function main() {\n  // your code goes here...\n}\n\nmain()\n  .then(() => {\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error(error);\n    process.exit(1);\n  });\n\n")),(0,o.kt)("p",null,"And that's it! Use this boilerplate to try out code within this guide."),(0,o.kt)("h2",{id:"install-the-polywrap-client"},"Install the Polywrap Client"),(0,o.kt)("p",null,"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"NPM"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm install --save @polywrap/client-js\n")),(0,o.kt)("p",null,"Using ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn add @polywrap/client-js\n")),(0,o.kt)("h2",{id:"invoking-your-first-wrap"},"Invoking your first Wrap"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},'The term "Wrap" and "Wrapper" are interchangeable. "Wrapper" is the old way in which we used to call Wraps, so don\'t get confused if you happen to come accross this term!')),(0,o.kt)("p",null,"In order to ",(0,o.kt)("a",{parentName:"p",href:"/concepts/invoke"},"invoke")," a Wrap, we first need to instantiate the Polywrap Client:"),(0,o.kt)("p",null,"At the top of your ",(0,o.kt)("inlineCode",{parentName:"p"},"index.js")," file, import the ",(0,o.kt)("inlineCode",{parentName:"p"},"PolywrapClient")," and instantiate it:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="index.js"',title:'"index.js"'},'import { PolywrapClient } from "@polywrap/client-js";\n\nconst client = new PolywrapClient();\n')),(0,o.kt)("p",null,"At this point, you can already invoke Wraps! In the simple example below, we will invoke the Logger Wrap within our ",(0,o.kt)("inlineCode",{parentName:"p"},"main")," function:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const result = await client.invoke({\n  uri: "ens/logger.polytest.eth",\n  method: "info",\n  args: {\n    message: "Hello Polywrap!",\n  },\n});\n\nconsole.log(result);\n')),(0,o.kt)("p",null,"Running the application using ",(0,o.kt)("inlineCode",{parentName:"p"},"node index.js"),", you should now see two lines appear in your console:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Hello Polywrap!\n{ ok: true, value: true }\n")),(0,o.kt)("p",null,"The first line is printed by the Logger Wrap, while the second line shows the structure of the ",(0,o.kt)("inlineCode",{parentName:"p"},"InvokeResult")," object."),(0,o.kt)("h3",{id:"whats-going-on-here"},"What's going on here?"),(0,o.kt)("p",null,"Using the Polywrap Client, we are invoking the ",(0,o.kt)("inlineCode",{parentName:"p"},"info")," method of a Wrap found under the ",(0,o.kt)("a",{parentName:"p",href:"/concepts/uris"},"WRAP URI")," ",(0,o.kt)("inlineCode",{parentName:"p"},"ens/logger.polytest.eth")," called the Logger Wrap."),(0,o.kt)("p",null,"Under the hood, through a process we call URI Resolution, the Polywrap Client knows how to fetch and execute the Wrap from decentralized storage."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"PolywrapClient")," comes pre-configured with everything you need for most Web2 and Web3 use-cases by default."),(0,o.kt)("h3",{id:"the-invokeresult-object"},"The ",(0,o.kt)("inlineCode",{parentName:"h3"},"InvokeResult")," object"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"InvokeResult")," object can have one of two structures:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A successful Wrap invocation returns ",(0,o.kt)("inlineCode",{parentName:"li"},"{ ok: true, value: ... }")," with ",(0,o.kt)("inlineCode",{parentName:"li"},"value")," being the return value of the Wrap invocation. This can be anything - a boolean value, a string, an object, etc."),(0,o.kt)("li",{parentName:"ul"},"A failed Wrap invocation returns ",(0,o.kt)("inlineCode",{parentName:"li"},"{ ok: false, error: ... }")," with ",(0,o.kt)("inlineCode",{parentName:"li"},"error")," describing the reason for invocation failure.")),(0,o.kt)("p",null,"Although not particularly useful in our last example, our next example leverages the fact that Wrap invocations return a value."),(0,o.kt)("h2",{id:"universal-sdks"},"Universal SDKs"),(0,o.kt)("p",null,"Now that we know how a Wrap is invoked, let's see Polywrap's true use-case: ",(0,o.kt)("strong",{parentName:"p"},"universal SDKs"),"!"),(0,o.kt)("p",null,"One of the greatest benefits of Polywrap for the end-user (you!) lies in the fact that you can use the Polywrap Client to invoke the same Wrap from a variety of platforms and languages. If there's a Polywrap Client for your language, you can invoke any Wrap. This means that you can use the same SDK across multiple languages!"),(0,o.kt)("p",null,"Another important benefit of using Polywrap is that, since Wraps are downloaded from various sources, you can automatically receive patches and updates to your SDKs without having to update your codebase."),(0,o.kt)("p",null,"Now we'll invoke the Uniswap V2 Wrap which is a port of the Uniswap SDK, but written as a Wrap."),(0,o.kt)("p",null,"We can use the Uniswap Wrap to fetch Uniswap's basic data related to the DAI token, and check the total market supply. We are also checking each result for errors."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const daiResult = await client.invoke({\n  uri: "ens/goerli/v2.uniswap.wrappers.eth",\n  method: "fetchTokenData",\n  args: {\n    address: "0x6B175474E89094C44Da98b954EedeAC495271d0F",\n    chainId: "MAINNET",\n  },\n});\n\n// Log the invocation error and stop execution if the invocation fails\nif(!daiResult.ok) {\n  console.log(daiResult.error)\n  return;\n}\n\nconsole.log(daiResult.value);\n\nconst totalSupplyResult = await client.invoke({\n  uri: "ens/goerli/v2.uniswap.wrappers.eth",\n  method: "fetchTotalSupply",\n  args: {\n    token: daiResult.value,\n  },\n});\n\nif(!totalSupplyResult.ok) {\n  console.log(totalSupplyResult.error);\n  return;\n}\n\nconsole.log(totalSupplyResult.value);\n')),(0,o.kt)("h2",{id:"compose-everything"},"Compose everything"),(0,o.kt)("p",null,"So far, we've only invoked a single Wrap, essentially using Polywrap to access a single SDK."),(0,o.kt)("p",null,"Using the Polywrap Client, we can invoke any number of SDKs, allowing us to build infinitely composable applications. If there's a Wrap for it, we can invoke it and use its functionality."),(0,o.kt)("p",null,"In this chapter's last example, we will use two separate SDKs to figure out the IPFS hash behind the Logger Wrap's ENS domain record, then fetch that Wrap's schema (more about that in the next chapter)."),(0,o.kt)("p",null,"First, we will use the Ens Resolver Wrap to resolve the ENS domain to an IPFS Wrap URI."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const client = new PolywrapClient();\n\n// We first want to resolve the ENS address into an IPFS WRAP URI\nconst resolutionResult = await client.invoke({\n  uri: "ens/ens-resolver.polywrap.eth",\n  method: "tryResolveUri",\n  args: {\n    authority: "ens",\n    path: "ens/logger.polytest.eth",\n  },\n});\n\nif (!resolutionResult.ok) {\n  console.log(resolutionResult.error);\n  return;\n}\n\nconsole.log(resolutionResult.value);\n')),(0,o.kt)("p",null,"Now, if we look at the ",(0,o.kt)("inlineCode",{parentName:"p"},"uri")," property of ",(0,o.kt)("inlineCode",{parentName:"p"},"resolutionResult.value"),", we will see a WRAP URI"),(0,o.kt)("p",null,"Once we have the IPFS hash, we will use the IPFS Wrap to fetch the contents of the Wrap's schema file, and print them out."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'// Extract the IPFS CID from the resolution result\'s URI\nconst cid = resolutionResult.value.uri.replace("ipfs/", "");\n\n// Since the CID is a directory, we need to add a path to the Wrap\'s schema file\nconst catResult = await client.invoke({\n  uri: "ens/ipfs.polywrap.eth",\n  method: "cat",\n  args: {\n    cid: cid + "/schema.graphql",\n  },\n});\n\nconsole.log(catResult);\n\nif (!catResult.ok) {\n  console.log(catResult.error);\n  return;\n}\n\n// Turn the returned buffer into a string and log it\nconst schema = catResult.value.toString();\n\nconsole.log(schema);\n')),(0,o.kt)("p",null,"In this example, we printed out a Wrap's Schema file. This is the definition of what types and methods are present within a Wrap, and we'll talk more about it in the next section."))}h.isMDXComponent=!0}}]);