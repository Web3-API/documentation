"use strict";(self.webpackChunk_polywrap_docs=self.webpackChunk_polywrap_docs||[]).push([[3926],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(n),c=l,k=d["".concat(p,".").concat(c)]||d[c]||m[c]||i;return n?a.createElement(k,r(r({ref:t},u),{},{components:n})):a.createElement(k,r({ref:t},u))}));function k(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=c;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[d]="string"==typeof e?e:l,r[1]=o;for(var s=2;s<i;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2794:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=n(7462),l=(n(7294),n(3905));const i={id:"polywrap-cli",hide_title:!0},r="The Polywrap CLI (polywrap)",o={unversionedId:"reference/cli/polywrap-cli",id:"reference/cli/polywrap-cli",title:"The Polywrap CLI (polywrap)",description:"A command-line interface for building and deploying Polywrap projects.",source:"@site/docs/reference/cli/polywrap-cli.md",sourceDirName:"reference/cli",slug:"/reference/cli/polywrap-cli",permalink:"/reference/cli/polywrap-cli",draft:!1,editUrl:"https://github.com/polywrap/documentation/tree/main/src/docs/reference/cli/polywrap-cli.md",tags:[],version:"current",frontMatter:{id:"polywrap-cli",hide_title:!0},sidebar:"docs",previous:{title:"Glossary",permalink:"/reference/glossary"},next:{title:"Create",permalink:"/reference/cli/commands/create"}},p={},s=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Docker",id:"docker",level:3},{value:"Cue",id:"cue",level:3},{value:"Installation",id:"installation",level:2},{value:"Commands",id:"commands",level:2},{value:"<code>help</code> command and <code>--help</code> option",id:"help-command-and---help-option",level:3},{value:"<code>build | b</code>",id:"build--b",level:3},{value:"Options",id:"options",level:4},{value:"<code>codegen | g</code>",id:"codegen--g",level:3},{value:"Options",id:"options-1",level:4},{value:"<code>create | c</code>",id:"create--c",level:3},{value:"Subcommands",id:"subcommands",level:4},{value:"Arguments",id:"arguments",level:4},{value:"Options",id:"options-2",level:4},{value:"Sample usage",id:"sample-usage",level:4},{value:"<code>deploy | d</code>",id:"deploy--d",level:3},{value:"Options",id:"options-3",level:4},{value:"<code>infra | i</code>",id:"infra--i",level:3},{value:"Arguments",id:"arguments-1",level:4},{value:"Options",id:"options-4",level:4},{value:"Defaults",id:"defaults",level:4},{value:"<code>test | t</code>",id:"test--t",level:3},{value:"Options",id:"options-5",level:4},{value:"The Test manifest (<code>polywrap.test.yaml</code>)",id:"the-test-manifest-polywraptestyaml",level:4},{value:"Test validation",id:"test-validation",level:4},{value:"<code>docgen | o</code>",id:"docgen--o",level:3},{value:"Arguments",id:"arguments-2",level:4},{value:"Options",id:"options-6",level:4},{value:"<code>manifest | m</code>",id:"manifest--m",level:3},{value:"Subcommands",id:"subcommands-1",level:4},{value:"<code>schema | s</code>",id:"schema--s",level:4},{value:"Arguments",id:"arguments-3",level:5},{value:"Options",id:"options-7",level:5},{value:"<code>migrate | m</code>",id:"migrate--m",level:4},{value:"Arguments",id:"arguments-4",level:5},{value:"Options",id:"options-8",level:5},{value:"The <code>-c, --client-config</code> option",id:"the--c---client-config-option",level:3},{value:"The <code>--wrapper-envs</code> option",id:"the---wrapper-envs-option",level:3},{value:"Logging",id:"logging",level:2},{value:"Logging levels",id:"logging-levels",level:3},{value:"Logging to a file",id:"logging-to-a-file",level:3}],u={toc:s},d="wrapper";function m(e){let{components:t,...n}=e;return(0,l.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"the-polywrap-cli-polywrap"},"The Polywrap CLI (",(0,l.kt)("inlineCode",{parentName:"h1"},"polywrap"),")"),(0,l.kt)("a",{href:"https://www.npmjs.com/package/polywrap",target:"_blank",rel:"noopener noreferrer"},(0,l.kt)("img",{src:"https://img.shields.io/npm/v/polywrap.svg",alt:"npm"})),(0,l.kt)("br",null),(0,l.kt)("br",null),(0,l.kt)("p",null,"A command-line interface for building and deploying Polywrap projects."),(0,l.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("h3",{id:"docker"},"Docker"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker")," is required to perform some tasks, including to ",(0,l.kt)("inlineCode",{parentName:"p"},"build")," Wasm wrappers.\nLinux users will also need to install ",(0,l.kt)("a",{parentName:"p",href:"https://docs.docker.com/compose/install/"},"Docker Compose"),".\nDocker is free for personal use. Once Docker is installed and enabled, you're ready to go!"),(0,l.kt)("h3",{id:"cue"},"Cue"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap run")," command can validate runs by examining ",(0,l.kt)("inlineCode",{parentName:"p"},"stdout")," output using ",(0,l.kt)("strong",{parentName:"p"},"Cue"),". If you need to run workflow validations, you will have to install Cue."),(0,l.kt)("p",null,"You can install Cue by following the instructions found ",(0,l.kt)("a",{parentName:"p",href:"https://cuelang.org/docs/install/"},"here"),"."),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("p",null,"Within a single project:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev polywrap\n")),(0,l.kt)("p",null,"Globally:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npm install -g polywrap\n")),(0,l.kt)("p",null,"Alternatively, ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap")," can be run without installation:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"npx polywrap\n")),(0,l.kt)("h2",{id:"commands"},"Commands"),(0,l.kt)("h3",{id:"help-command-and---help-option"},(0,l.kt)("inlineCode",{parentName:"h3"},"help")," command and ",(0,l.kt)("inlineCode",{parentName:"h3"},"--help")," option"),(0,l.kt)("p",null,"To list available commands, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"help")," command or the ",(0,l.kt)("inlineCode",{parentName:"p"},"-h, --help")," option:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap help\npolywrap --help\n")),(0,l.kt)("p",null,"Alternatively, you can use the ",(0,l.kt)("inlineCode",{parentName:"p"},"-h, --help")," option within any command to get a full list of available subcommands, arguments and options."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap create --help\npolywrap codegen --help\n")),(0,l.kt)("h3",{id:"build--b"},(0,l.kt)("inlineCode",{parentName:"h3"},"build | b")),(0,l.kt)("p",null,"Build Wasm and Interface Polywrap projects."),(0,l.kt)("p",null,"This outputs the project's ABI schema (Wasm and Interface) and binary package (Wasm) into the ",(0,l.kt)("inlineCode",{parentName:"p"},"./build")," directory."),(0,l.kt)("p",null,"Currently, ",(0,l.kt)("inlineCode",{parentName:"p"},"build")," can be run for Wasm, Plugin and Interface projects."),(0,l.kt)("h4",{id:"options"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify your project's manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"build")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-o, --output-dir <path>"),"\nSpecify an alternative directory for build output.\nThe default codegen output directory is ",(0,l.kt)("inlineCode",{parentName:"p"},"./build"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config <config-path>"),"\nUse a custom Polywrap Client configuration.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs <envs-path>"),"\nConfigure wrapper environment values using the provided file.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-n, --no-codegen"),"\nSkip codegen before building.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"build")," performs a ",(0,l.kt)("inlineCode",{parentName:"p"},"codegen")," step before building your Project. This option skips this step.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-s, --strategy <strategy>"),"\nSpecify which build strategy to use. By default, the ",(0,l.kt)("inlineCode",{parentName:"p"},"vm")," build strategy is used.\nAvailable strategies:"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"vm"),": Uses Docker only for the source building part of the build process. At build time, it pulls a pre-built image with all necessary system dependencies, env vars and runtime; and it instantiates a Docker container with it. The Docker container instantiates bind-mounts (volumes) to copy the sources and dependencies from the host, build the sources inside the container, and copy the build artifacts back to the host machine. This approach ensures that the sources will be built in a reproducible environment but it doesn't use Docker for anything else and no image is built at runtime."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"image"),": Implies building a Docker image at runtime, where dependencies are installed and sources are copied and built as Dockerfile instructions. On subsequent builds, Docker tries to reuse cached image layers and rebuild accordingly. This approach is notably slow but the complete process happens in Docker, and can be reproduced, examined and audited layer by layer (from dependency installation to build artifacts output)."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"local")," - Does not use Docker at all. It simply executes a .sh file that contains the necessary instructions to install dependencies and build sources. While this is the fastest way of building, it requires you, the user, to have all prerequisite system dependencies installed. In addition, given that sources are built on the host machine and not a reproducible docker environment, reproducibility isn't guaranteed."))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-w, --watch"),"\nWatch the Project's files and automatically rebuild when a file is changed."))),(0,l.kt)("h3",{id:"codegen--g"},(0,l.kt)("inlineCode",{parentName:"h3"},"codegen | g")),(0,l.kt)("p",null,"Generate code bindings for Polywrap projects."),(0,l.kt)("p",null,"This command generates types and bindings for your project based on your project's schema (found in ",(0,l.kt)("inlineCode",{parentName:"p"},"schema.graphql"),")."),(0,l.kt)("p",null,"Currently, ",(0,l.kt)("inlineCode",{parentName:"p"},"codegen")," can be run for App, Plugin and Wasm projects."),(0,l.kt)("h4",{id:"options-1"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify your project's manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"docgen")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-g, --codegen-dir <path>"),"\nSpecify an alternative directory for codegen output.\nThe default codegen output directory is ",(0,l.kt)("inlineCode",{parentName:"p"},"./wrap"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-p, --publish-dir <path>"),"\nOutput path for the built schema and manifest (default: ",(0,l.kt)("inlineCode",{parentName:"p"},"./build"),")\nThis only applies when running ",(0,l.kt)("inlineCode",{parentName:"p"},"codegen")," for Plugin Projects.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-s, --script <path>"),"\nPath to a custom generation script (JavaScript | TypeScript).\nThis script is run in place of the standard codegen script if provided.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config <config-path>"),"\nUse a custom Polywrap Client configuration.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs <envs-path>"),"\nConfigure wrapper environment values using the provided file."))),(0,l.kt)("h3",{id:"create--c"},(0,l.kt)("inlineCode",{parentName:"h3"},"create | c")),(0,l.kt)("p",null,"Create a Polywrap project."),(0,l.kt)("p",null,"This command sets up a basic Polywrap-enabled project based on a pre-defined template."),(0,l.kt)("h4",{id:"subcommands"},"Subcommands"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"polywrap create wasm <language> <name>")),(0,l.kt)("p",null,"Set up a Polywrap WASM Wrapper or Interface project."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"polywrap create app <language> <name>")),(0,l.kt)("p",null,"Set up a NodeJS or React application which uses the Polywrap Client to invoke wrappers."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"polywrap create plugin <language> <name>")),(0,l.kt)("p",null,"Set up a Polywrap Plugin project used to provide the Polywrap Cient with additional functionality."),(0,l.kt)("h4",{id:"arguments"},"Arguments"),(0,l.kt)("p",null,"All subcommands share the following arguments:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"language")," (required)\nThe type/language of the created project")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"name")," (required)\nThe project name."))),(0,l.kt)("h4",{id:"options-2"},"Options"),(0,l.kt)("p",null,"All subcommands share the following options:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"-o, --output-dir <path>"),"\nSpecifies a custom output directory for the created project.")),(0,l.kt)("h4",{id:"sample-usage"},"Sample usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# Create a wrapper project using assemblyscript called "my-wrapper"\npolywrap create wasm assemblyscript my-wrapper\n\n# Create an interface project using assemblyscript called "my-project"\npolywrap create wasm interface my-interface\n\n# Create a project using Typescript called "my-react-app"\npolywrap create app typescript my-app\n\n# Create a Plugin wrapper project using Typescript called "my-plugin"\npolywrap create plugin typescript my-plugin\n')),(0,l.kt)("h3",{id:"deploy--d"},(0,l.kt)("inlineCode",{parentName:"h3"},"deploy | d")),(0,l.kt)("p",null,"Deploy Polywrap projects."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap deploy\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"deploy")," reads the Deploy manifest (",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.deploy.yaml")," by default) and executes the jobs and steps listed inside."),(0,l.kt)("p",null,"For more information on the Deploy command and the Deploy manifest, see ",(0,l.kt)("a",{parentName:"p",href:"https://docs.polywrap.io/quick-start/build-and-deploy-wasm-wrappers/deploy-pipeline"},"Configure Polywrap deployment pipeline"),"."),(0,l.kt)("h4",{id:"options-3"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify your project's manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"deploy")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-o, --output-file <path>"),"\nOutput file path for the deploy result"))),(0,l.kt)("h3",{id:"infra--i"},(0,l.kt)("inlineCode",{parentName:"h3"},"infra | i")),(0,l.kt)("p",null,"Modular Infrastructure-As-Code Orchestrator"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap infra <action> [options]\n")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"infra")," command is used to set up infrastructure to test and deploy your wrappers locally."),(0,l.kt)("p",null,"For more information on the ",(0,l.kt)("inlineCode",{parentName:"p"},"infra")," command and how to create your own Infra modules, see ",(0,l.kt)("a",{parentName:"p",href:"https://docs.polywrap.io/quick-start/test-wasm-wrappers/infra-pipeline"},"Configure Polywrap infrastructure pipeline")),(0,l.kt)("h4",{id:"arguments-1"},"Arguments"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"action")," (required)\nInfra allows you to execute the following actions:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"up"),"\nStart Polywrap infrastructure"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"down"),"\nStop Polywrap infrastructure"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"config"),"\nValidate and display Polywrap infrastructure's bundled docker-compose manifest"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"vars"),"\nShow Polywrap infrastructure's required .env variables")))),(0,l.kt)("h4",{id:"options-4"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify the ",(0,l.kt)("inlineCode",{parentName:"p"},"infra")," extension manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"infra")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.infra.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-o, --modules <module, module>"),"\nUse only specified modules"))),(0,l.kt)("h4",{id:"defaults"},"Defaults"),(0,l.kt)("p",null,"Polywrap comes with a default ",(0,l.kt)("inlineCode",{parentName:"p"},"eth-ens-ipfs")," module which can be used to test your wrappers locally:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"polywrap infra up --modules=eth-ens-ipfs\n")),(0,l.kt)("p",null,"The default infrastructure module defines a docker container with:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A test server at http://localhost:4040"),(0,l.kt)("li",{parentName:"ul"},"A Ganache Ethereum test network at http://localhost:8545"),(0,l.kt)("li",{parentName:"ul"},"An IPFS node at http://localhost:5001")),(0,l.kt)("p",null,"It also sets up ENS smart contracts at initialization, so you can build wrappers and deploy them to an ENS registry on your locally hosted testnet."),(0,l.kt)("p",null,"Addresses for the components of ENS:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Registry: ",(0,l.kt)("inlineCode",{parentName:"li"},"0xe78A0F7E598Cc8b0Bb87894B0F60dD2a88d6a8Ab")),(0,l.kt)("li",{parentName:"ul"},"Resolver: ",(0,l.kt)("inlineCode",{parentName:"li"},"0x5b1869D9A4C187F2EAa108f3062412ecf0526b24")),(0,l.kt)("li",{parentName:"ul"},"Registrar: ",(0,l.kt)("inlineCode",{parentName:"li"},"0xD833215cBcc3f914bD1C9ece3EE7BF8B14f841bb")),(0,l.kt)("li",{parentName:"ul"},"Reverse Registrar: ",(0,l.kt)("inlineCode",{parentName:"li"},"0xe982E462b094850F12AF94d21D470e21bE9D0E9C"))),(0,l.kt)("h3",{id:"test--t"},(0,l.kt)("inlineCode",{parentName:"h3"},"test | t")),(0,l.kt)("p",null,"Run Test manifests. "),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"test")," command executes a series of Wrapper invocations called ",(0,l.kt)("strong",{parentName:"p"},"steps")," organized into ",(0,l.kt)("strong",{parentName:"p"},"jobs"),".\nAll steps within a job are run in series, while jobs are run in parallel."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap test [options]\n")),(0,l.kt)("h4",{id:"options-5"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify the Workflow extension manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"run")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.test.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config <config-path>"),"\nUse a custom Polywrap Client configuration.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs <envs-path>"),"\nConfigure wrapper environment values using the provided file.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-o, --output-file <output-file-path>"),"\nSpecify the output file path for the workflow result")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-j, --jobs <jobs...>"),"\nSpecify ids of jobs that you want to run"))),(0,l.kt)("h4",{id:"the-test-manifest-polywraptestyaml"},"The Test manifest (",(0,l.kt)("inlineCode",{parentName:"h4"},"polywrap.test.yaml"),")"),(0,l.kt)("p",null,"Basic structure:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'# The basic structure of a test file \nname: my-test-name #the name of the test\nformat: 0.1.0\nvalidation: "path/to/validator.cue" #(optional) path to a validator file (cuelang)\njobs:\n  first:\n    steps: #each step is a wrapper invocation that consists of a URI, the invoked method and its arguments\n    - uri: ens/example.eth\n      method: helloWorld\n      args:\n        arg1: "test"\n        ...\n    - ...\n    jobs: #after all job steps are executed, additional jobs can be run in parallel\n      ...\n  second:\n    ...\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"jobs")," is a map of ",(0,l.kt)("inlineCode",{parentName:"p"},"<string, Job>"),", the key being each Job's name."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"jobs:\n  helloWorld:\n    ...\n  helloPolywrap:\n    ...\n")),(0,l.kt)("p",null,"Each Job consists of two properties:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"a ",(0,l.kt)("inlineCode",{parentName:"li"},"steps")," collection",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"This is a wrapper invocation, consisting of:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"uri")," - the WRAP URI of the wrapper"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"method")," - the name of the invoked wrapper method"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"args")," (optional) - a map of the invoked method's arguments"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"config")," (optional) - a map of client config properties to be added/overridden"))))),(0,l.kt)("li",{parentName:"ul"},"an inner ",(0,l.kt)("inlineCode",{parentName:"li"},"jobs")," map, making the structure of ",(0,l.kt)("inlineCode",{parentName:"li"},"Job")," recursive.")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"jobs:\n  helloWorld:\n    steps:\n    - uri: ens/helloworld.polywrap.eth #ENS URI\n      method: helloWorld\n      args:\n        name: test\n    - uri: fs/./hello-polywrap/build #Filesystem URI\n      method: helloPolywrap\n    jobs:\n      innerJob1:\n      ...\n      innerJob2:\n      ...\n  helloPolywrap:\n    steps:\n    ...\n    jobs:\n    ...\n")),(0,l.kt)("p",null,"When running a Test manifest, all top-level Jobs are run in parallel. Within those Jobs, each step is run in series. After all steps for a Job have been run, the inner ",(0,l.kt)("inlineCode",{parentName:"p"},"jobs")," are run in parallel, with their ",(0,l.kt)("inlineCode",{parentName:"p"},"steps")," run in series, and so on."),(0,l.kt)("p",null,"You can reference the result (",(0,l.kt)("inlineCode",{parentName:"p"},"data"),"/",(0,l.kt)("inlineCode",{parentName:"p"},"error"),") of any step by using the ",(0,l.kt)("inlineCode",{parentName:"p"},"$")," symbol:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'jobs:\n  helloWorld:\n    steps:\n    - uri: ens/helloworld.polywrap.eth #ENS URI\n      method: helloWorld\n      args:\n        name: test\n    - uri: fs/./hello-polywrap/build #Filesystem URI\n      method: helloPolywrap\n    jobs:\n      innerJob1:\n        steps:\n        - uri: ens/helloworld.polywrap.eth\n          method: helloWorld\n          args:\n            name: "$helloWorld.1.data" #Reference to `helloWorld`\'s 2nd step return value\n        jobs:\n          innerJob11:\n            steps:\n            - uri: ens/helloworld.polywrap.eth\n              method: helloWorld\n              args:\n                name: "$helloWorld.innerJob1.0.error" #Reference to helloWorld\'s innerJob1 1st step error\n')),(0,l.kt)("h4",{id:"test-validation"},"Test validation"),(0,l.kt)("p",null,"By specifying a ",(0,l.kt)("inlineCode",{parentName:"p"},"validation")," file within your Test manifest, the result of the run will be validated using ",(0,l.kt)("inlineCode",{parentName:"p"},"cue"),"."),(0,l.kt)("p",null,"Example of a validation file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-cuelang"},'helloWorld: {\n  $0: {\n    data: "Hello test!",\n    error?: _|_, // Never fails\n  }\n  $1: {\n    data: "Hello Polywrap!",\n    error?: _|_, // Never fails\n  }\n  innerJob1: {\n    $0: {\n      data: "Hello Hello test!!",\n      error?: _|_,\n    }\n  }\n}\n')),(0,l.kt)("h3",{id:"docgen--o"},(0,l.kt)("inlineCode",{parentName:"h3"},"docgen | o")),(0,l.kt)("p",null,"Generate wrapper documentation for your project."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap docgen <action>\n")),(0,l.kt)("h4",{id:"arguments-2"},"Arguments"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"action")," (required)\nSpecifies the kind of documentation generated.\nValues:",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"schema"),"\nGenerates GraphQL-like schema for your project."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"docusaurus"),"\nGenerates Docusaurus markdown for your project."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"jsdoc"),"\nGenerates JSDoc markdown for your project.")))),(0,l.kt)("h4",{id:"options-6"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nSpecify your project's manifest file.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"docgen")," searches for ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.yaml"),".")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-g, --docgen-dir <path>"),"\nSpecify the output directory for generated docs.\nBy default, ",(0,l.kt)("inlineCode",{parentName:"p"},"./docs")," is used.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config <config-path>"),"\nUse a custom Polywrap Client configuration.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs <envs-path>"),"\nConfigure wrapper environment values using the provided file.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-i, --imports"),"\nGenerate docs for your project's dependencies as well."))),(0,l.kt)("h3",{id:"manifest--m"},(0,l.kt)("inlineCode",{parentName:"h3"},"manifest | m")),(0,l.kt)("p",null,"Inspect and migrate Polywrap manifests."),(0,l.kt)("h4",{id:"subcommands-1"},"Subcommands"),(0,l.kt)("h4",{id:"schema--s"},(0,l.kt)("inlineCode",{parentName:"h4"},"schema | s")),(0,l.kt)("p",null,"Output the schema for any of your Project or Extension manifests. "),(0,l.kt)("p",null,"Usage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Output schema for the current project manifest (polywrap.yaml)\npolywrap manifest schema\n")),(0,l.kt)("h5",{id:"arguments-3"},"Arguments"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"type"),"\nThe type of the manifest file. The default value for ",(0,l.kt)("inlineCode",{parentName:"li"},"type")," is ",(0,l.kt)("inlineCode",{parentName:"li"},"project"),".")),(0,l.kt)("h5",{id:"options-7"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"-r, --raw"),"\nOutput the full JSON Schema for the given manifest."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"-m, --manifest-file <path>"),"\nThe manifest file for which the schema will be rendered. The ",(0,l.kt)("inlineCode",{parentName:"li"},"type")," argument determines the default manifest file used.\nFor example, ",(0,l.kt)("inlineCode",{parentName:"li"},"polywrap manifest schema build")," will use ",(0,l.kt)("inlineCode",{parentName:"li"},"polywrap.build.yaml")," as its default manifest file.")),(0,l.kt)("h4",{id:"migrate--m"},(0,l.kt)("inlineCode",{parentName:"h4"},"migrate | m")),(0,l.kt)("p",null,"Migrate a Project or Extension manifest file to the the latest version, or a version specified."),(0,l.kt)("p",null,"Usage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Migrate the current project manifest (polywrap.yaml)\npolywrap manifest migrate\n")),(0,l.kt)("h5",{id:"arguments-4"},"Arguments"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"type"),"\nThe type of the manifest file. The default value for ",(0,l.kt)("inlineCode",{parentName:"li"},"type")," is ",(0,l.kt)("inlineCode",{parentName:"li"},"project"),".")),(0,l.kt)("h5",{id:"options-8"},"Options"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-f, --format <format>"),"\nMigrate to a specific format instead of the latest."),(0,l.kt)("p",{parentName:"li"},"Example:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Migrate the current project manfiest to format 0.2.0\npolywrap manifest migrate -f 0.2.0\n# or\npolywrap m m -f 0.2.0\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-m, --manifest-file <path>"),"\nThe manifest file for which the schema will be rendered. The ",(0,l.kt)("inlineCode",{parentName:"p"},"type")," argument determines the default manifest file used.\nFor example, ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap manifest migrate build")," will use ",(0,l.kt)("inlineCode",{parentName:"p"},"polywrap.build.yaml")," as its default manifest file."),(0,l.kt)("p",{parentName:"li"},"Example:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# Migrate "custom-manifest.yaml" to the latest format\npolywrap manifest migrate -m custom-manifest.yaml\n# or\npolywrap m m -m custom-manifest.yaml\n')))),(0,l.kt)("h3",{id:"the--c---client-config-option"},"The ",(0,l.kt)("inlineCode",{parentName:"h3"},"-c, --client-config")," option"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"build"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"codegen"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"docgen")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"test")," commands allow the user to configure the Polywrap Client via the ",(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config <config-path>")," option."),(0,l.kt)("p",null,"You can supply a path to a Javascript or Typescript module which exports a function named ",(0,l.kt)("inlineCode",{parentName:"p"},"getClientConfig"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-typescript"},"// asynchronous option\nexport async function getClientConfig(\n  defaultConfigs: Partial<PolywrapClientConfig>\n): Promise<Partial<PolywrapClientConfig>>\n\n// synchronous option\nexport function getClientConfig(\n  defaultConfigs: Partial<PolywrapClientConfig>\n): Partial<PolywrapClientConfig>\n")),(0,l.kt)("h3",{id:"the---wrapper-envs-option"},"The ",(0,l.kt)("inlineCode",{parentName:"h3"},"--wrapper-envs")," option"),(0,l.kt)("p",null,"All commands which support the ",(0,l.kt)("inlineCode",{parentName:"p"},"-c, --client-config")," option also support the ",(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs <envs-path>")," option.\nThis option allows the user to set environment values for Wrappers using a simple YAML or JSON file."),(0,l.kt)("p",null,"For example, if you would like to change the API key used within the Ethereum plugin wrapper, you can create a ",(0,l.kt)("inlineCode",{parentName:"p"},"envs.yaml")," file:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"ens/ethereum.polywrap.eth:\n  connection:\n    node: https://mainnet.infura.io/v3/YOUR_API_KEY # Use Infura with your API key\n    networkNameOrChainId: mainnet\n")),(0,l.kt)("p",null,"You can then run the ",(0,l.kt)("inlineCode",{parentName:"p"},"build"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"codegen"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"docgen")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"test")," and specify your custom ",(0,l.kt)("inlineCode",{parentName:"p"},"--wrapper-envs"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"polywrap codegen --wrapper-envs envs.yaml\n")),(0,l.kt)("p",null,"You can also pass environment variables into the wrappper-envs file by using ",(0,l.kt)("inlineCode",{parentName:"p"},"$"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"ens/ethereum.polywrap.eth:\n  connection:\n    node: $MY_INFURA_NODE # Use environment variable called MY_INFURA_NODE\n    networkNameOrChainId: mainnet\n")),(0,l.kt)("p",null,"If you need to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"$")," sign within your wrapper-envs file, you can escape it using ",(0,l.kt)("inlineCode",{parentName:"p"},"$$"),"."),(0,l.kt)("h2",{id:"logging"},"Logging"),(0,l.kt)("p",null,"By default, the Polywrap CLI outputs all of its messages to the console."),(0,l.kt)("h3",{id:"logging-levels"},"Logging levels"),(0,l.kt)("p",null,"Different levels of output verbosity are supported by using the following options:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-v, --verbose"),"\nEnables logging of informational messages in addition to standard output.")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"-q, --quiet"),"\nDisables ALL logging. Overrides the ",(0,l.kt)("inlineCode",{parentName:"p"},"--verbose")," option."))),(0,l.kt)("h3",{id:"logging-to-a-file"},"Logging to a file"),(0,l.kt)("p",null,"You can also tell the Polywrap CLI to save its output to a logfile using the ",(0,l.kt)("inlineCode",{parentName:"p"},"-l, --log-file [path]")," option."),(0,l.kt)("p",null,"Specifying the ",(0,l.kt)("inlineCode",{parentName:"p"},"-l")," option without a ",(0,l.kt)("inlineCode",{parentName:"p"},"path")," parameter will create a log file within the ",(0,l.kt)("inlineCode",{parentName:"p"},"./.polywrap/logs")," directory."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# Output will be saved to the "./.polywrap/logs" directory\npolywrap codegen -l\n')),(0,l.kt)("p",null,"Alternatively, you can specify your own log file path."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'# Output will be saved to "my-log-file.log"\npolywrap codegen -l my-log-file.log\n')))}m.isMDXComponent=!0}}]);