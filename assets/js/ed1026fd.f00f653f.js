"use strict";(self.webpackChunk_polywrap_docs=self.webpackChunk_polywrap_docs||[]).push([[4325],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>w});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(a),m=o,w=d["".concat(p,".").concat(m)]||d[m]||u[m]||r;return a?n.createElement(w,i(i({ref:t},c),{},{components:a})):n.createElement(w,i({ref:t},c))}));function w(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[d]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2547:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(7462),o=(a(7294),a(3905));const r={id:"polywrap-cli",title:"Polywrap CLI"},i=void 0,l={unversionedId:"quick-start/polywrap-cli",id:"quick-start/polywrap-cli",title:"Polywrap CLI",description:"Now that we have a basic understanding of the Polywrap Client, it's time to see how we can use the Polywrap CLI to create an amazing experience when working with Wraps.",source:"@site/docs/quick-start/polywrap-cli.md",sourceDirName:"quick-start",slug:"/quick-start/polywrap-cli",permalink:"/quick-start/polywrap-cli",draft:!1,editUrl:"https://github.com/polywrap/documentation/tree/main/src/docs/quick-start/polywrap-cli.md",tags:[],version:"current",frontMatter:{id:"polywrap-cli",title:"Polywrap CLI"},sidebar:"docs",previous:{title:"Polywrap Client",permalink:"/quick-start/polywrap-client"},next:{title:"What Wraps are available?",permalink:"/quick-start/what-wraps-are-available"}},p={},s=[{value:"Installation",id:"installation",level:2},{value:"Overview",id:"overview",level:2},{value:"Create a Polywrap-powered application",id:"create-a-polywrap-powered-application",level:2},{value:"The Polywrap Manifest (<code>polywrap.yaml</code>)",id:"the-polywrap-manifest-polywrapyaml",level:2},{value:"The Schema File (<code>schema.graphql</code>)",id:"the-schema-file-schemagraphql",level:3},{value:"Generating types (<code>codegen</code>)",id:"generating-types-codegen",level:3},{value:"IntelliSense your way to Victory!",id:"intellisense-your-way-to-victory",level:2},{value:"A real-world exmaple, revisited",id:"a-real-world-exmaple-revisited",level:2}],c={toc:s},d="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Now that we have a basic understanding of the Polywrap Client, it's time to see how we can use the Polywrap CLI to create an amazing experience when working with Wraps."),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("p",null,"To install the Polywrap CLI, add the ",(0,o.kt)("inlineCode",{parentName:"p"},"polywrap")," package as a dev dependency to your project:"),(0,o.kt)("p",null,"NPM:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm i --save-dev polywrap\n")),(0,o.kt)("p",null,"Yarn:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn add --dev polywrap\n")),(0,o.kt)("p",null,"You can also install the Polywrap CLI globally:"),(0,o.kt)("p",null,"NPM:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm i -g polywrap\n")),(0,o.kt)("p",null,"Yarn:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn global add polywrap\n")),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"The Polywrap CLI allows us not only to build, test, and deploy Wraps, but also generate types for our applications which use the Polywrap Client."),(0,o.kt)("p",null,"This tutorial assumes that you installed ",(0,o.kt)("inlineCode",{parentName:"p"},"polywrap")," globally, but you can always prefix the commands with ",(0,o.kt)("inlineCode",{parentName:"p"},"npx")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"yarn run")," to run the locally installed version of your Polywrap CLI."),(0,o.kt)("p",null,"You can see all available commands by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"polywrap help\n")),(0,o.kt)("h2",{id:"create-a-polywrap-powered-application"},"Create a Polywrap-powered application"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you already have an application you want to add Polywrap to, it is advised that you still follow this guide and transfer/modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"polywrap.yaml")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"src/schema.graphql")," files once you're done with this tutorial.")),(0,o.kt)("p",null,"The Polywrap CLI can be used to quickly set up a template application. For this tutorial, we will create a sample Node application written in Typescript and use the Polywrap Client to invoke multiple Wraps."),(0,o.kt)("p",null,"To set up a Polywrap-powered application, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"polywrap create app typescript my-application\n")),(0,o.kt)("p",null,"This uses the ",(0,o.kt)("inlineCode",{parentName:"p"},"create")," command to set up a template Node application written in Typescript called ",(0,o.kt)("inlineCode",{parentName:"p"},"my-application")," inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"my-application/")," directory. Now we want to navigate into the application folder and install its dependencies."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd my-application\nyarn\n")),(0,o.kt)("p",null,"If you take a look at ",(0,o.kt)("inlineCode",{parentName:"p"},"package.json"),", you'll find the app depends on ",(0,o.kt)("inlineCode",{parentName:"p"},"@polywrap/client-js")," and has a dev dependency on ",(0,o.kt)("inlineCode",{parentName:"p"},"polywrap"),", with the addition of minimal dev dependencies that allow us to develop the app using Typescript."),(0,o.kt)("p",null,"Now let's take a look at some of the files Polywrap works with."),(0,o.kt)("h2",{id:"the-polywrap-manifest-polywrapyaml"},"The Polywrap Manifest (",(0,o.kt)("inlineCode",{parentName:"h2"},"polywrap.yaml"),")"),(0,o.kt)("p",null,"In order for the Polywrap CLI to know what it's working with, it needs a Polywrap Manifest file to obtain some basic information about your project. This is the ",(0,o.kt)("inlineCode",{parentName:"p"},"polywrap.yaml")," file."),(0,o.kt)("p",null,"It has a structure similar to this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="polywrap.yaml"',title:'"polywrap.yaml"'},"format: 0.3.0\nproject:\n  name: Sample\n  type: app/typescript\nsource:\n  schema: ./schema.graphql\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"format")," property denotes the version of the Polywrap Manifest format. Under ",(0,o.kt)("inlineCode",{parentName:"p"},"project"),", you can set the ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," field to the name of your application, while the ",(0,o.kt)("inlineCode",{parentName:"p"},"type")," field describes the project type, thus letting the CLI know how to interact with the application code."),(0,o.kt)("p",null,"Under the ",(0,o.kt)("inlineCode",{parentName:"p"},"source")," section, we have a ",(0,o.kt)("inlineCode",{parentName:"p"},"schema")," field with a path that leads to a Schema file."),(0,o.kt)("p",null,"In the context of a Polywrap-powered application project, this file defines which Wraps our application imports/uses. This will come in handy later when we'll use the CLI to generate types and code which your app will use."),(0,o.kt)("h3",{id:"the-schema-file-schemagraphql"},"The Schema File (",(0,o.kt)("inlineCode",{parentName:"h3"},"schema.graphql"),")"),(0,o.kt)("p",null,"Every Polywrap project has a Schema file - it defines the types found within the project, what Wraps the project imports, and, in the case of a WASM Wrap, the methods that Wrap exposes."),(0,o.kt)("p",null,"In the context of an application project, the Schema file defines which Wraps our application imports and is used by the CLI to generate code with which we can invoke our Wraps in a type-safe manner."),(0,o.kt)("p",null,"Taking a look at the file, we can see two ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," statements:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql",metastring:'title="schema.graphql"',title:'"schema.graphql"'},'#import * into Logging from "ens/wraps.eth:logging@1.0.0"\n#import * into Ethereum from "ens/wraps.eth:ethereum@1.0.0"\n')),(0,o.kt)("p",null,"An ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," statement defines which Wraps we are importing, therefore using within our application. Imports are namespaced - the Wrap found under the WRAP URI ",(0,o.kt)("inlineCode",{parentName:"p"},"ens/wraps.eth:logging@1.0.0")," is going to be found within the ",(0,o.kt)("inlineCode",{parentName:"p"},"Logging_")," namespace."),(0,o.kt)("h3",{id:"generating-types-codegen"},"Generating types (",(0,o.kt)("inlineCode",{parentName:"h3"},"codegen"),")"),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"While we used Javascript in previous samples, Polywrap is native to Typescript, and all future examples will be written in Typescript.")),(0,o.kt)("p",null,'Now that we know how we can "import" Wraps into our application, we can use the ',(0,o.kt)("inlineCode",{parentName:"p"},"codegen")," command inside the Polywrap CLI to generate types that represent our Wraps which we can use within our application."),(0,o.kt)("p",null,"To generate types, all we need to do is run the ",(0,o.kt)("inlineCode",{parentName:"p"},"codegen")," command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"polywrap codegen\n")),(0,o.kt)("p",null,"This will generate types inside the ",(0,o.kt)("inlineCode",{parentName:"p"},"src/wrap")," directory which you will use within your application."),(0,o.kt)("h2",{id:"intellisense-your-way-to-victory"},"IntelliSense your way to Victory!"),(0,o.kt)("p",null,"Now that we have our types generated, we can take a look at our sample application's ",(0,o.kt)("inlineCode",{parentName:"p"},"src/index.ts")," file."),(0,o.kt)("p",null,"Let's first take a look at some of the imports:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import {\n  Logging_Module,\n  Ethereum_Module,\n} from "./wrap";\n')),(0,o.kt)("p",null,"Here we can see that we've imported Module types that represent our Wraps, according to their specified namespace. Using these types, we can invoke our Wraps in a type-safe manner, without having to repeatedly specify the Wrap URI:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const client = new PolywrapClient();\n\nawait Logging_Module.info({\n  message: "Hello there",\n}, client);\n')),(0,o.kt)("p",null,"This allows us to write all of our code in a type-safe manner, and allows for IDEs like VS Code to give us autocompletion suggestions via IntelliSense. Now we can explore our Wraps by simply importing them and trying them out!"),(0,o.kt)("h2",{id:"a-real-world-exmaple-revisited"},"A real-world exmaple, revisited"),(0,o.kt)("p",null,"Let's revisit our Uniswap V3 Wrap example from the Quick Start tutorial. If we wanted to invoke the Uniswap V3 Wrap without codegen, we had to write the following code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const usdcResult = await client.invoke({\n  uri: "ens/uniswap.wraps.eth:v3",\n  method: "fetchToken",\n  args: {\n    address: "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",\n    chainId: "MAINNET",\n  },\n});\n')),(0,o.kt)("p",null,"Instead, we can now add an ",(0,o.kt)("inlineCode",{parentName:"p"},"import")," statement for the Uniswap V3 Wrap to our ",(0,o.kt)("inlineCode",{parentName:"p"},"schema.graphql")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-graphql",metastring:'title="schema.graphql"',title:'"schema.graphql"'},'#import * into UniswapV3 from "ens/uniswap.wraps.eth:v3"\n')),(0,o.kt)("p",null,"Running ",(0,o.kt)("inlineCode",{parentName:"p"},"codegen")," now will add all types defined inside the Uniswap V3 Wrap to our ",(0,o.kt)("inlineCode",{parentName:"p"},"wrap")," folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"polywrap codegen\n")),(0,o.kt)("p",null,"We can now import the ",(0,o.kt)("inlineCode",{parentName:"p"},"UniswapV3_Module")," and supporting types into our ",(0,o.kt)("inlineCode",{parentName:"p"},"index.ts")," file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'import {\n  UniswapV3_Module,\n  UniswapV3_ChainIdEnum,\n} from "./wrap";\n')),(0,o.kt)("p",null,"We can now invoke the Uniswap V3 Wrap by writing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'const usdcResult = await UniswapV3_Module.fetchToken(\n  {\n    address: "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",\n    chainId: UniswapV3_ChainIdEnum.MAINNET,\n  },\n  client\n);\n')),(0,o.kt)("p",null,"Already inside the invocation, we can see that the ",(0,o.kt)("inlineCode",{parentName:"p"},"chainId")," is an ",(0,o.kt)("inlineCode",{parentName:"p"},"enum")," type, with all supported networks already listed. Polywrap also takes care of required and optional arguments, and if you play around, you will find that we omitted the ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"symbol")," optional invocation arguments."),(0,o.kt)("p",null,"If ",(0,o.kt)("inlineCode",{parentName:"p"},"usdcResult.ok")," is true, its ",(0,o.kt)("inlineCode",{parentName:"p"},"value")," will now have a type of ",(0,o.kt)("inlineCode",{parentName:"p"},"UniswapV3_Token"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},'if(!usdcResult.ok) {\n  console.error(usdcResult.error);\n  return;\n}\n\n// token is now of type UniswapV3_Token found in "./wrap"\nconst token = usdcResult.value;\n\nconsole.log(token);\n')),(0,o.kt)("p",null,"As you can see, Polywrap allows us to invoke any SDK or other piece of executable logic packaged as a Wrap in a type-safe manner, accross a multitude of platforms and languages!"),(0,o.kt)("p",null,"Of course, by using the Polywrap CLI you can build your own Wraps which you will be able to run anywhere where there's a Polywrap Client."),(0,o.kt)("p",null,"Make sure to check out our list of supported (and coming) clients, and proceed to the next section to see what Wraps are readily available!"))}u.isMDXComponent=!0}}]);